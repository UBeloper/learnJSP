package com.it.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.it.domain.CartmainVO;
import com.it.domain.CartsubVO;
import com.it.mapper.CartMapper;

import lombok.Setter;
import lombok.extern.log4j.Log4j;

@Log4j
@Service
public class CartServiceImpl implements CartService {

	@Setter(onMethod_ = @Autowired)
	private CartMapper mapper;
	
	@Override
	public void cartInsert(CartmainVO cartmain, CartsubVO cartsub) {
		CartmainVO cm = new CartmainVO();
		cm = mapper.readMainID(cartmain); // 세션 아이디를 인수로 조회하여 결과 얻기
		
		if(cm == null) { //cartmain에 해당사용자의 레코드 1개를 신규생성해야 함.
			mapper.insertMain(cartmain);
			// cm_code가 생성되었으나 조회해봐야 알 수 있음.
			log.info(cm);
			mapper.readMain(cartmain);
			
			/* mapper.insertSub(cartsub); */
		} else {
			
		}
		
		System.out.println("====C M====");
		System.out.println(cartmain);
		System.out.println("====C S====");
		System.out.println(cartsub);
				
	}
}
